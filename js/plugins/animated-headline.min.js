"use strict";

jQuery(document).ready(function (d) {
  var s,
      t,
      l = 2500,
      r = 3800,
      o = r - 3e3,
      n = 50,
      c = 150,
      h = 500,
      p = h + 800,
      u = 600,
      e = 1500;

  function f(s) {
    var i = w(s);

    if (s.parents(".cd-headline").hasClass("type")) {
      var e = s.parent(".cd-words-wrapper");
      e.addClass("selected").removeClass("waiting"), setTimeout(function () {
        e.removeClass("selected"), s.removeClass("is-visible").addClass("is-hidden").children("i").removeClass("in").addClass("out");
      }, h), setTimeout(function () {
        C(i, c);
      }, p);
    } else if (s.parents(".cd-headline").hasClass("letters")) {
      var a = s.children("i").length >= i.children("i").length;
      !function s(i, e, a, n) {
        i.removeClass("in").addClass("out");
        i.is(":last-child") ? a && setTimeout(function () {
          f(w(e));
        }, l) : setTimeout(function () {
          s(i.next(), e, a, n);
        }, n);

        if (i.is(":last-child") && d("html").hasClass("no-csstransitions")) {
          var t = w(e);
          v(e, t);
        }
      }(s.find("i").eq(0), s, a, n), m(i.find("i").eq(0), i, a, n);
    } else s.parents(".cd-headline").hasClass("clip") ? s.parents(".cd-words-wrapper").animate({
      width: "2px"
    }, u, function () {
      v(s, i), C(i);
    }) : s.parents(".cd-headline").hasClass("loading-bar") ? (s.parents(".cd-words-wrapper").removeClass("is-loading"), v(s, i), setTimeout(function () {
      f(i);
    }, r), setTimeout(function () {
      s.parents(".cd-words-wrapper").addClass("is-loading");
    }, o)) : (v(s, i), setTimeout(function () {
      f(i);
    }, l));
  }

  function C(s, i) {
    s.parents(".cd-headline").hasClass("type") ? (m(s.find("i").eq(0), s, !1, i), s.addClass("is-visible").removeClass("is-hidden")) : s.parents(".cd-headline").hasClass("clip") && s.parents(".cd-words-wrapper").animate({
      width: s.width() + 10
    }, u, function () {
      setTimeout(function () {
        f(s);
      }, e);
    });
  }

  function m(s, i, e, a) {
    s.addClass("in").removeClass("out"), s.is(":last-child") ? (i.parents(".cd-headline").hasClass("type") && setTimeout(function () {
      i.parents(".cd-words-wrapper").addClass("waiting");
    }, 200), e || setTimeout(function () {
      f(i);
    }, l)) : setTimeout(function () {
      m(s.next(), i, e, a);
    }, a);
  }

  function w(s) {
    return s.is(":last-child") ? s.parent().children().eq(0) : s.next();
  }

  function v(s, i) {
    s.removeClass("is-visible").addClass("is-hidden"), i.removeClass("is-hidden").addClass("is-visible");
  }

  d(".cd-headline.letters").find("b").each(function () {
    var s = d(this),
        e = s.text().split(""),
        a = s.hasClass("is-visible");

    for (i in e) {
      0 < s.parents(".rotate-2").length && (e[i] = "<em>" + e[i] + "</em>"), e[i] = a ? '<i class="in">' + e[i] + "</i>" : "<i>" + e[i] + "</i>";
    }

    var n = e.join("");
    s.html(n).css("opacity", 1);
  }), s = d(".cd-headline"), t = l, s.each(function () {
    var s = d(this);
    if (s.hasClass("loading-bar")) t = r, setTimeout(function () {
      s.find(".cd-words-wrapper").addClass("is-loading");
    }, o);else if (s.hasClass("clip")) {
      var i = s.find(".cd-words-wrapper"),
          e = i.width() + 10;
      i.css("width", e);
    } else if (!s.hasClass("type")) {
      var a = s.find(".cd-words-wrapper b"),
          n = 0;
      a.each(function () {
        var s = d(this).width();
        n < s && (n = s);
      }), s.find(".cd-words-wrapper").css("width", n);
    }
    setTimeout(function () {
      f(s.find(".is-visible").eq(0));
    }, t);
  });
});